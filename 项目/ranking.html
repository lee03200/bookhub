<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookHub - 热门书籍榜单</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .star-rating {
            display: flex;
            gap: 4px;
        }

        .star {
            cursor: pointer;
            transition: color 0.2s;
        }

        .star.filled {
            color: #fbbf24;
        }

        .book-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .vip-badge {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #fff;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="app">
        <!-- 导航栏 -->
        <nav class="bg-white shadow-lg sticky top-0 z-50">
            <div class="container mx-auto px-4">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-book text-3xl text-indigo-600"></i>
                        <h1 class="text-2xl font-bold text-gray-800">BookHub</h1>
                    </div>

                    <!-- 搜索栏 -->
                    <div class="hidden md:flex flex-1 max-w-md mx-8">
                        <div class="relative w-full">
                            <input type="text" placeholder="搜索书籍、作者或ISBN..."
                                class="w-full px-4 py-2 pl-10 pr-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                v-model="searchKeyword" @input="handleSearch">
                            <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                        </div>
                    </div>

                    <!-- 导航菜单 -->
                    <div class="hidden md:flex items-center space-x-6">
                        <a href="4.html" class="text-gray-700 hover:text-indigo-600 transition">首页</a>
                        <a href="#" class="text-indigo-600 font-medium">热门榜单</a>
                        <a href="4.html#my-shelf" class="text-gray-700 hover:text-indigo-600 transition">我的书架</a>
                        <button class="flex items-center text-indigo-600 hover:text-indigo-800 transition" @click="showVipModal">
                            <i class="fas fa-crown mr-1"></i>
                            <span>会员</span>
                            <span v-if="userInfo.isVip" class="ml-1 px-1.5 py-0.5 text-xs rounded-full vip-badge">VIP</span>
                        </button>
                        <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition"
                            @click="showLoginModal">
                            {{ isLoggedIn ? '个人中心' : '登录/注册' }}
                        </button>
                    </div>

                    <!-- 移动端菜单按钮 -->
                    <button @click="mobileMenuOpen = !mobileMenuOpen" class="md:hidden">
                        <i class="fas fa-bars text-2xl text-gray-700"></i>
                    </button>
                </div>

                <!-- 移动端菜单 -->
                <div v-if="mobileMenuOpen" class="md:hidden pb-4">
                    <div class="flex flex-col space-y-2">
                        <input type="text" placeholder="搜索书籍..."
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg" v-model="searchKeyword"
                            @input="handleSearch">
                        <a href="4.html" class="text-gray-700 hover:text-indigo-600 py-2">首页</a>
                        <a href="#" class="text-indigo-600 font-medium py-2">热门榜单</a>
                        <a href="4.html#my-shelf" class="text-gray-700 hover:text-indigo-600 py-2">我的书架</a>
                        <button class="flex items-center text-indigo-600 hover:text-indigo-800 py-2" @click="showVipModal">
                            <i class="fas fa-crown mr-1"></i>
                            <span>会员</span>
                            <span v-if="userInfo.isVip" class="ml-1 px-1.5 py-0.5 text-xs rounded-full vip-badge">VIP</span>
                        </button>
                        <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700"
                            @click="showLoginModal">
                            {{ isLoggedIn ? '个人中心' : '登录/注册' }}
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- 主要内容区域 -->
        <main class="container mx-auto px-4 py-8">
            <!-- 页面标题 -->
            <section class="mb-8">
                <h2 class="text-3xl font-bold text-gray-800">热门书籍榜单</h2>
                <p class="text-gray-600 mt-2">发现最受欢迎的书籍，探索不同类别的热门读物</p>
            </section>

            <!-- 分类筛选 -->
            <section class="mb-8">
                <div class="flex flex-wrap gap-3">
                    <button v-for="category in categories" :key="category" @click="filterByCategory(category)" :class="[
                            'px-4 py-2 rounded-full transition',
                            selectedCategory === category
                                ? 'bg-indigo-600 text-white'
                                : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-300'
                        ]">
                        {{ category }}
                    </button>
                </div>
            </section>

            <!-- 榜单内容 -->
            <section>
                <h3 class="text-xl font-bold text-gray-800 mb-4">
                    {{ selectedCategory === '全部' ? '全品类热门榜' : selectedCategory + '热门榜' }}
                </h3>

                <div v-if="filteredBooks.length === 0" class="text-center py-12 bg-white rounded-lg shadow">
                    <i class="fas fa-search text-5xl text-gray-300 mb-4"></i>
                    <p class="text-gray-500">未找到相关书籍</p>
                </div>

                <div v-else class="bg-white rounded-lg shadow-md overflow-hidden">
                    <div class="divide-y divide-gray-100">
                        <div v-for="(book, index) in filteredBooks" :key="book.id"
                            class="flex items-center space-x-4 p-4 hover:bg-gray-50 cursor-pointer transition"
                            @click="openBookDetail(book)">
                            <div
                                class="flex-shrink-0 w-10 h-10 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold">
                                {{ index + 1 }}
                            </div>
                            <div
                                class="flex-shrink-0 w-20 h-28 bg-gradient-to-br from-gray-200 to-gray-300 rounded overflow-hidden relative">
                                <img :src="book.cover" :alt="book.title" class="w-full h-full object-cover">
                                <div v-if="book.isPremium && !userInfo.isVip" class="absolute top-1 right-1 bg-red-500 text-white text-xs px-1.5 py-0.5 rounded">
                                    会员
                                </div>
                            </div>
                            <div class="flex-1 min-w-0">
                                <h4 class="font-semibold text-gray-800 truncate">{{ book.title }}</h4>
                                <p class="text-gray-600 text-sm">{{ book.author }}</p>
                                <div class="flex items-center space-x-4 mt-2">
                                    <div class="flex items-center space-x-1">
                                        <star-rating :rating="book.rating" :readonly="true"></star-rating>
                                        <span class="text-sm text-gray-600">{{ book.rating }}</span>
                                    </div>
                                    <span class="text-sm text-gray-500">{{ book.genre }}</span>
                                    <span class="text-sm text-indigo-600 font-semibold">{{ book.heat }}° 热度</span>
                                </div>
                            </div>
                            <div class="text-right hidden md:block">
                                <p class="text-sm text-gray-500">{{ book.reviews }} 人评价</p>
                                <p class="text-xs text-gray-400 mt-1">{{ book.reading }} 人在读</p>
                            </div>
                            <button class="ml-auto text-gray-400 hover:text-indigo-600 transition" @click.stop="addToShelf(book.id)">
                                <i class="fas fa-plus-circle text-xl"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- 书籍详情模态框 (与主页面保持一致) -->
        <div v-if="selectedBook" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
            <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-start mb-6">
                        <h2 class="text-3xl font-bold text-gray-800">{{ selectedBook.title }}</h2>
                        <div v-if="selectedBook.isPremium && !userInfo.isVip" class="bg-red-500 text-white text-sm px-3 py-1 rounded-full flex items-center">
                            <i class="fas fa-crown mr-1"></i>
                            <span>会员专享</span>
                        </div>
                        <button @click="selectedBook = null" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times text-2xl"></i>
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <div
                                class="aspect-[3/4] bg-gradient-to-br from-gray-200 to-gray-300 rounded-lg mb-4 overflow-hidden">
                                <img :src="selectedBook.cover" :alt="selectedBook.title"
                                    class="w-full h-full object-cover">
                            </div>
                            <div class="space-y-2 text-sm">
                                <p><span class="font-semibold">作者:</span> {{ selectedBook.author }}</p>
                                <p><span class="font-semibold">出版社:</span> {{ selectedBook.publisher }}</p>
                                <p><span class="font-semibold">出版日期:</span> {{ selectedBook.publishDate }}</p>
                                <p><span class="font-semibold">页数:</span> {{ selectedBook.pages }}</p>
                                <p><span class="font-semibold">ISBN:</span> {{ selectedBook.isbn }}</p>
                            </div>
                        </div>

                        <div class="md:col-span-2">
                            <div class="mb-6">
                                <h3 class="text-xl font-semibold mb-3">书籍简介</h3>
                                <p class="text-gray-700 leading-relaxed">{{ selectedBook.description }}</p>
                            </div>

                            <div class="mb-6">
                                <div class="flex items-center space-x-4 mb-4">
                                    <div class="flex items-center space-x-2">
                                        <star-rating v-model="userRating" :readonly="false"></star-rating>
                                        <span class="text-lg font-semibold">{{ userRating }}/5</span>
                                    </div>
                                    <button
                                        class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition"
                                        @click="submitRating">
                                        提交评分
                                    </button>
                                </div>

                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <h4 class="font-semibold mb-2">写评论</h4>
                                    <textarea
                                        class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                        rows="3" placeholder="分享你的阅读感受..." v-model="commentContent"></textarea>
                                    <button
                                        class="mt-3 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition"
                                        @click="submitComment">
                                        发布评论
                                    </button>
                                </div>
                            </div>

                            <!-- 评论列表 -->
                            <div>
                                <h4 class="font-semibold mb-4">读者评论</h4>
                                <div class="space-y-4">
                                    <div class="border-b border-gray-100 pb-4"
                                        v-for="(comment, idx) in selectedBook.comments" :key="idx">
                                        <div class="flex items-center space-x-2 mb-2">
                                            <img :src="comment.avatar" alt="用户头像" class="w-8 h-8 rounded-full">
                                            <span class="font-medium">{{ comment.username }}</span>
                                            <span v-if="comment.isVip" class="text-xs px-1.5 py-0.5 rounded-full vip-badge">VIP</span>
                                            <star-rating :rating="comment.rating" :readonly="true"></star-rating>
                                        </div>
                                        <p class="text-gray-700">{{ comment.content }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 会员充值模态框 -->
        <div v-if="showVip" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
            <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-start mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">BookHub 会员充值</h2>
                        <button @click="showVip = false" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times text-2xl"></i>
                        </button>
                    </div>
                    <div class="text-center py-6">
                        <p>会员套餐内容与主页面保持一致</p>
                        <button class="mt-4 bg-indigo-600 text-white px-4 py-2 rounded-lg" @click="showVip = false">关闭</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 登录模态框 -->
        <div v-if="showLogin" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
            <div class="bg-white rounded-lg w-full max-w-md">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">登录 / 注册</h2>
                        <button @click="showLogin = false" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    <div class="text-center py-6">
                        <p>登录表单内容与主页面保持一致</p>
                        <button class="mt-4 bg-indigo-600 text-white px-4 py-2 rounded-lg" @click="showLogin = false">关闭</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 星级评分组件
        const StarRating = {
            props: ['rating', 'readonly', 'modelValue'],
            emits: ['update:modelValue'],
            template: `
                <div class="star-rating">
                    <i 
                        v-for="i in 5" 
                        :key="i" 
                        class="star fas fa-star"
                        :class="{ 'filled': i <= currentRating }"
                        @click="handleClick(i)"
                    ></i>
                </div>
            `,
            computed: {
                currentRating: {
                    get() {
                        return this.modelValue !== undefined ? this.modelValue : this.rating;
                    },
                    set(value) {
                        this.$emit('update:modelValue', value);
                    }
                }
            },
            methods: {
                handleClick(i) {
                    if (!this.readonly) {
                        this.currentRating = i;
                    }
                }
            }
        };

        // 主应用
        const { createApp } = Vue;
        createApp({
            components: {
                StarRating
            },
            data() {
                return {
                    // 导航状态
                    mobileMenuOpen: false,
                    searchKeyword: '',
                    
                    // 用户状态
                    isLoggedIn: false,
                    userInfo: {
                        isVip: false,
                        vipExpireDate: ''
                    },
                    
                    // 榜单数据
                    categories: ['全部', '文学', '科幻', '历史', '传记', '商业', '科技', '哲学', '艺术', '心理学'],
                    selectedCategory: '全部',
                    allBooks: [],
                    filteredBooks: [],
                    
                    // 书籍详情
                    selectedBook: null,
                    userRating: 0,
                    commentContent: '',
                    
                    // 模态框状态
                    showVip: false,
                    showLogin: false
                };
            },
            mounted() {
                // 模拟加载书籍数据
                this.loadBooksData();
            },
            methods: {
                // 加载书籍数据
                loadBooksData() {
                    // 模拟书籍数据 - 实际项目中应从API获取
                    this.allBooks = [
                        {
                            id: 1,
                            title: "人类简史",
                            author: "尤瓦尔·赫拉利",
                            cover: "https://picsum.photos/id/24/300/450",
                            rating: 4.8,
                            reviews: 12543,
                            genre: "历史",
                            heat: 987,
                            reading: 5621,
                            isPremium: false,
                            publisher: "中信出版社",
                            publishDate: "2014-11-01",
                            pages: 452,
                            isbn: "9787508647357",
                            description: "《人类简史》是以色列历史学家尤瓦尔·赫拉利的重磅作品，讲述了人类如何从一个普通的非洲灵长类动物，一步步成为地球的主宰。",
                            comments: [
                                { username: "书虫", avatar: "https://picsum.photos/id/64/100/100", rating: 5, content: "改变认知的一本书，强烈推荐！" },
                                { username: "阅读者", avatar: "https://picsum.photos/id/65/100/100", rating: 4, content: "视角独特，值得一读" }
                            ]
                        },
                        {
                            id: 2,
                            title: "三体",
                            author: "刘慈欣",
                            cover: "https://picsum.photos/id/20/300/450",
                            rating: 4.9,
                            reviews: 25678,
                            genre: "科幻",
                            heat: 976,
                            reading: 8932,
                            isPremium: false,
                            publisher: "重庆出版社",
                            publishDate: "2008-01-01",
                            pages: 302,
                            isbn: "9787536692930",
                            description: "《三体》是刘慈欣创作的长篇科幻小说，是“地球往事三部曲”系列的第一部。小说以文化大革命为背景，讲述了地球人类文明和三体文明的第一次接触。",
                            comments: [
                                { username: "科幻迷", avatar: "https://picsum.photos/id/91/100/100", rating: 5, content: "中国科幻的里程碑之作！" }
                            ]
                        },
                        {
                            id: 3,
                            title: "活着",
                            author: "余华",
                            cover: "https://picsum.photos/id/21/300/450",
                            rating: 4.7,
                            reviews: 18965,
                            genre: "文学",
                            heat: 965,
                            reading: 6321,
                            isPremium: false,
                            publisher: "作家出版社",
                            publishDate: "1993-01-01",
                            pages: 191,
                            isbn: "9787506310797",
                            description: "《活着》讲述了中国农村一个普通人福贵的一生，通过他的经历反映了中国近百年来社会的变迁。",
                            comments: []
                        },
                        {
                            id: 4,
                            title: "思考，快与慢",
                            author: "丹尼尔·卡尼曼",
                            cover: "https://picsum.photos/id/22/300/450",
                            rating: 4.6,
                            reviews: 11234,
                            genre: "心理学",
                            heat: 954,
                            reading: 4521,
                            isPremium: true,
                            publisher: "中信出版社",
                            publishDate: "2012-07-01",
                            pages: 424,
                            isbn: "9787508633558",
                            description: "《思考，快与慢》是诺贝尔经济学奖得主丹尼尔·卡尼曼的经典著作，讲述了人类思考的两个系统，以及它们如何影响我们的判断和决策。",
                            comments: []
                        },
                        {
                            id: 5,
                            title: "史蒂夫·乔布斯传",
                            author: "沃尔特·艾萨克森",
                            cover: "https://picsum.photos/id/23/300/450",
                            rating: 4.8,
                            reviews: 9876,
                            genre: "传记",
                            heat: 943,
                            reading: 3256,
                            isPremium: false,
                            publisher: "中信出版社",
                            publishDate: "2011-10-24",
                            pages: 576,
                            isbn: "9787508630788",
                            description: "《史蒂夫·乔布斯传》是乔布斯唯一授权的传记，由《时代》周刊记者沃尔特·艾萨克森撰写，讲述了乔布斯传奇的一生。",
                            comments: []
                        },
                        {
                            id: 6,
                            title: "未来简史",
                            author: "尤瓦尔·赫拉利",
                            cover: "https://picsum.photos/id/25/300/450",
                            rating: 4.5,
                            reviews: 8765,
                            genre: "历史",
                            heat: 932,
                            reading: 2890,
                            isPremium: false,
                            publisher: "中信出版社",
                            publishDate: "2017-02-01",
                            pages: 416,
                            isbn: "9787508672069",
                            description: "《未来简史》是尤瓦尔·赫拉利继《人类简史》之后的又一力作，探讨了人类在解决了饥荒、瘟疫和战争之后，未来将面临的新挑战。",
                            comments: []
                        },
                        {
                            id: 7,
                            title: "原则",
                            author: "瑞·达利欧",
                            cover: "https://picsum.photos/id/26/300/450",
                            rating: 4.7,
                            reviews: 7654,
                            genre: "商业",
                            heat: 921,
                            reading: 2567,
                            isPremium: true,
                            publisher: "中信出版社",
                            publishDate: "2018-01-01",
                            pages: 592,
                            isbn: "9787508684067",
                            description: "《原则》是桥水基金创始人瑞·达利欧的著作，分享了他的生活和工作原则，以及这些原则如何帮助他取得成功。",
                            comments: []
                        },
                        {
                            id: 8,
                            title: "人类群星闪耀时",
                            author: "斯蒂芬·茨威格",
                            cover: "https://picsum.photos/id/27/300/450",
                            rating: 4.6,
                            reviews: 6543,
                            genre: "历史",
                            heat: 910,
                            reading: 2134,
                            isPremium: false,
                            publisher: "生活·读书·新知三联书店",
                            publishDate: "2009-06-01",
                            pages: 272,
                            isbn: "9787108031488",
                            description: "《人类群星闪耀时》是斯蒂芬·茨威格的历史特写集，记录了人类历史上十个重要的时刻，这些时刻影响了人类的命运。",
                            comments: []
                        }
                    ];
                    
                    // 按热度排序
                    this.allBooks.sort((a, b) => b.heat - a.heat);
                    
                    // 初始化筛选结果
                    this.filteredBooks = [...this.allBooks];
                },
                
                // 按分类筛选
                filterByCategory(category) {
                    this.selectedCategory = category;
                    if (category === '全部') {
                        this.filteredBooks = [...this.allBooks];
                    } else {
                        this.filteredBooks = this.allBooks.filter(book => book.genre === category);
                    }
                },
                
                // 搜索处理
                handleSearch() {
                    if (!this.searchKeyword) {
                        this.filterByCategory(this.selectedCategory);
                        return;
                    }
                    
                    const keyword = this.searchKeyword.toLowerCase();
                    this.filteredBooks = this.allBooks.filter(book => 
                        (this.selectedCategory === '全部' || book.genre === this.selectedCategory) &&
                        (book.title.toLowerCase().includes(keyword) || 
                         book.author.toLowerCase().includes(keyword))
                    );
                },
                
                // 打开书籍详情
                openBookDetail(book) {
                    this.selectedBook = {...book};
                    this.userRating = book.rating;
                    this.commentContent = '';
                },
                
                // 提交评分
                submitRating() {
                    if (!this.isLoggedIn) {
                        this.showLogin = true;
                        return;
                    }
                    alert(`已提交评分: ${this.userRating}星`);
                },
                
                // 提交评论
                submitComment() {
                    if (!this.isLoggedIn) {
                        this.showLogin = true;
                        return;
                    }
                    if (!this.commentContent.trim()) return;
                    
                    this.selectedBook.comments.unshift({
                        username: "我",
                        avatar: "https://picsum.photos/id/64/100/100",
                        rating: this.userRating,
                        content: this.commentContent,
                        isVip: this.userInfo.isVip
                    });
                    this.commentContent = '';
                    alert("评论发布成功！");
                },
                
                // 添加到书架
                addToShelf(bookId) {
                    if (!this.isLoggedIn) {
                        this.showLogin = true;
                        return;
                    }
                    alert("已添加到书架");
                },
                
                // 显示会员模态框
                showVipModal() {
                    this.showVip = true;
                },
                
                // 显示登录模态框
                showLoginModal() {
                    this.showLogin = true;
                }
            }
        }).mount('#app');
    </script>
</body>
</html>